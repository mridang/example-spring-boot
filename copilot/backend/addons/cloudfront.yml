Parameters:
    App:
        Type: String
        Description: Your application's name.
    Env:
        Type: String
        Description: The environment name your service, job, or workflow is being deployed to.
    Name:
        Type: String
        Description: The name of the service, job, or workflow being deployed.

    LambdaFunctionVersion:
        Description: AWS Lambda@Edge function version.
        Type: String
        Default: "1"

Resources:
    myDistribution:
        Type: 'AWS::CloudFront::Distribution'
        Metadata:
            'aws:copilot:description': 'Cloudfront Distribution'
        Properties:
            DistributionConfig:
                Origins:
                    - DomainName:
                          Fn::ImportValue:
                            !Sub "${App}-${Env}-PublicLoadBalancerDNS"
                      Id: myCustomOrigin
                      CustomOriginConfig:
                          HTTPPort: 80
                          OriginProtocolPolicy: http-only
                Enabled: true
                Comment: !Sub "{$App}-${Env}-${Name}"
                DefaultCacheBehavior:
                    TargetOriginId: myCustomOrigin
                    ViewerProtocolPolicy: allow-all
                    ForwardedValues:
                        QueryString: false
                        Cookies:
                            Forward: all
                ViewerCertificate:
                    CloudFrontDefaultCertificate: true
                OriginCustomHeader:
                  [CloudFront-Viewer-Country-Name](#cfn-cloudfront-distribution-origincustomheader-CloudFront-Viewer-Country-Name): String
                  [CloudFront-Viewer-City](#cfn-cloudfront-distribution-origincustomheader-CloudFront-Viewer-City): String
                  [CloudFront-Viewer-Latitude](#cfn-cloudfront-distribution-origincustomheader-CloudFront-Viewer-Latitude): String
                  [CloudFront-Viewer-Longitude](#cfn-cloudfront-distribution-origincustomheader-CloudFront-Viewer-Longitude): String
                  [CloudFront-Is-SmartTV-Viewer](#cfn-cloudfront-distribution-origincustomheader-CloudFront-Is-SmartTV-Viewer): String
                  [CloudFront-Is-Tablet-Viewer](#cfn-cloudfront-distribution-origincustomheader-CloudFront-Is-Tablet-Viewer): String
                  [CloudFront-Is-Mobile-Viewer](#cfn-cloudfront-distribution-origincustomheader-CloudFront-Is-Mobile-Viewer): String
                  [CloudFront-Is-Desktop-Viewer](#cfn-cloudfront-distribution-origincustomheader-CloudFront-Is-Desktop-Viewer): String
